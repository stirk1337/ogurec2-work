Ogurec Bot
===========

Discord бот с интеграцией GPT, Steam API и автоматическими функциями для сервера.

Требования
----------
- Python 3.14+
- uv или pip для управления зависимостями
- Токен Discord бота
- API ключи: Groq (GPT), Tenor, Steam

Установка
---------
Настройка переменных среды (файл `.env` в корне)
```
DISCORD_BOT_TOKEN=xxx
GPT_API_KEY=xxx          # Groq API ключ
TENOR_API_KEY=xxx
STEAM_API_KEY=xxx
PREFIX=!
BOT_CHAT_ID=749662464538443948
MAIN_CHAT_ID=670981415306788870
```

Основные возможности
--------------------
- **GPT чат с историей**: Ответы через GPT с запоминанием контекста разговора (сброс через 10 минут без активности)
- **Steam интеграция**: Автоматический выбор игры из библиотек пользователей для presence
- **Ребрендинг система**: Автоматическая ротация роли "Ребрендинг" каждые 2 недели (четные пятницы)
- **Случайные реакции**: Эмодзи, стикеры и ответы на сообщения
- **Персонализация**: Случайные настроения бота (30% шанс), информация о пользователях (5% шанс)

Slash команды
-------------
- `/hello` — приветствие пользователя
- `/rebranding` — показать порядок ребрендинга и время до следующего
- `/reset_history` — сбросить историю чата для текущего канала
- `/set_model` — изменить модель GPT для канала (17 доступных моделей)
- `/get_model` — показать текущую модель для канала

Доступные модели GPT
--------------------
- GPT OSS 120B / 20B / Safeguard 20B
- Qwen 3 32B
- Llama 3.1 8B Instant / 3.3 70B Versatile
- Llama 4 Maverick 17B / Scout 17B
- Llama Guard 4 12B
- Llama Prompt Guard 2 (22M / 86M)
- Kimi K2 Instruct (обычная / 0905)
- Allam 2 7B
- Orpheus Arabic Saudi
- Groq Compound / Compound Mini

Автоматические функции
-----------------------
- **GPT ответы**: 
  - На упоминания с точкой/восклицанием/вопросом в конце
  - Случайные ответы на сообщения (вероятностно)
  - От 1 до 10 предложений в ответе
  - История чата с системными сообщениями (эмодзи сервера, настроения)
  - С шансом 25% отправляет стикер после ответа

- **Presence и игры**:
  - Каждый час обновляет статус с игрой из Steam библиотеки случайного пользователя
  - Генерирует сообщение про игру через GPT
  - С шансом 10% критикует вкус игрока
  - Пингует пользователя, у которого взята игра

- **Ребрендинг**:
  - Автоматическая смена роли каждые 2 недели (четные пятницы в 00:01)
  - Напоминание в канал с эмодзи и стикером
  - Ротация по списку пользователей

- **Реакции**:
  - Случайные реакции эмодзи на сообщения
  - Случайные ответы GPT на сообщения

Настройки бота
--------------
- История чата сбрасывается через 10 минут без активности
- Каждый канал может иметь свою модель GPT
- Системные сообщения включают список эмодзи сервера (при первом сообщении)
- Случайные настроения бота (30% шанс): футболист, программист, гопник, политик, ведьмак и др.

Технические детали
------------------
- Использует Groq API для GPT
- Steam API для получения игр пользователей
- Tenor API для GIF
- История хранится в памяти (сбрасывается при перезапуске)
- Поддержка timezone: UTC+5 (Екатеринбург)
